<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Project Architect</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --accent-glow: rgba(99, 102, 241, 0.5);
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background: radial-gradient(circle at top left, #0f172a, #020617);
            color: #f8fafc;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .glass {
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            border-radius: 1.5rem;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .progress-line {
            position: relative;
            height: 2px;
            background: rgba(255, 255, 255, 0.1);
            overflow: hidden;
        }

        .progress-fill {
            position: absolute;
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #6366f1, #a855f7);
            transition: width 0.4s ease;
        }

        .shimmer {
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.05), transparent);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        .pulse-soft {
            animation: pulse-soft 2s infinite;
        }

        @keyframes pulse-soft {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .step-active {
            border-color: #6366f1;
            box-shadow: 0 0 15px rgba(99, 102, 241, 0.3);
        }

        .rotate-slow {
            animation: rotate 8s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.1); border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(255, 255, 255, 0.2); }
    </style>
</head>
<body class="p-4 md:p-8 flex items-center justify-center">

    <div class="max-w-5xl w-full space-y-6">
        <!-- Header -->
        <header class="flex flex-col md:flex-row md:items-center justify-between gap-4 glass p-6 mb-2">
            <div>
                <h1 class="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 to-purple-400">
                    <i class="fas fa-microchip mr-2"></i>AI Swarm Architect
                </h1>
                <p class="text-slate-400 text-sm mt-1">Autonomous Template Engine v2.5</p>
            </div>
            
            <div id="stack-selector" class="flex flex-wrap gap-2">
                <div class="px-3 py-1.5 rounded-full bg-indigo-500/20 border border-indigo-500/30 text-indigo-300 text-xs font-medium">
                    <i class="fab fa-react mr-1"></i> React 18
                </div>
                <div class="px-3 py-1.5 rounded-full bg-emerald-500/20 border border-emerald-500/30 text-emerald-300 text-xs font-medium">
                    <i class="fas fa-wind mr-1"></i> Tailwind CSS
                </div>
                <div class="px-3 py-1.5 rounded-full bg-blue-500/20 border border-blue-500/30 text-blue-300 text-xs font-medium">
                    <i class="fab fa-node-js mr-1"></i> TypeScript
                </div>
            </div>

            <button id="start-btn" class="px-8 py-2.5 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-semibold transition-all shadow-lg shadow-indigo-900/20 active:scale-95">
                Generate Template
            </button>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Left Column: Phases & Progress -->
            <div class="lg:col-span-2 space-y-6">
                <!-- Main Status Board -->
                <div class="glass p-6 min-h-[500px] flex flex-col">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-lg font-semibold flex items-center">
                            <i id="phase-icon" class="fas fa-circle-notch mr-3 text-indigo-400"></i>
                            <span id="current-phase-title">Waiting to start...</span>
                        </h2>
                        <div class="text-xs font-mono text-slate-500" id="step-counter">0 / 5 PHASES</div>
                    </div>

                    <!-- Steps Container -->
                    <div id="steps-container" class="space-y-4 flex-grow">
                        <!-- Phases will be injected here -->
                        <div class="flex items-center justify-center h-full text-slate-500 flex-col opacity-50">
                            <i class="fas fa-robot text-5xl mb-4"></i>
                            <p>Configure your stack and click Start</p>
                        </div>
                    </div>

                    <!-- Global Progress Footer -->
                    <div class="mt-8 pt-6 border-t border-white/5">
                        <div class="flex justify-between text-xs mb-2 text-slate-400 font-mono">
                            <span>TOTAL PROGRESS</span>
                            <span id="global-percentage">0%</span>
                        </div>
                        <div class="progress-line rounded-full">
                            <div id="global-progress-bar" class="progress-fill"></div>
                        </div>
                    </div>
                </div>

                <!-- Log Panel -->
                <div class="glass p-4 h-40 overflow-hidden relative">
                    <div class="absolute top-0 left-0 w-full h-1 bg-indigo-500/20 overflow-hidden">
                        <div class="shimmer w-full h-full"></div>
                    </div>
                    <div class="text-[10px] font-mono text-indigo-300/80 mb-2 uppercase tracking-widest opacity-60">System Runtime Logs</div>
                    <div id="log-terminal" class="space-y-1 overflow-y-auto h-24 font-mono text-xs text-slate-400 scroll-smooth">
                        <div class="text-slate-500">> Initializing kernel...</div>
                        <div class="text-slate-500">> AI Swarm connection ready.</div>
                    </div>
                </div>
            </div>

            <!-- Right Column: Sidebar Stats -->
            <div class="space-y-6">
                <!-- AI Agent Health -->
                <div class="glass p-5">
                    <h3 class="text-sm font-semibold mb-4 text-slate-300">Swarm Agents</h3>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <div class="w-8 h-8 rounded-lg bg-indigo-500/20 flex items-center justify-center text-indigo-400">
                                    <i class="fas fa-brain text-sm"></i>
                                </div>
                                <span class="text-xs">Logic Architect</span>
                            </div>
                            <span class="text-[10px] px-2 py-0.5 rounded bg-emerald-500/20 text-emerald-400 border border-emerald-500/30">IDLE</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <div class="w-8 h-8 rounded-lg bg-purple-500/20 flex items-center justify-center text-purple-400">
                                    <i class="fas fa-eye text-sm"></i>
                                </div>
                                <span class="text-xs">Visual Verifier</span>
                            </div>
                            <span class="text-[10px] px-2 py-0.5 rounded bg-slate-500/20 text-slate-400 border border-slate-500/30">STANDBY</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <div class="w-8 h-8 rounded-lg bg-orange-500/20 flex items-center justify-center text-orange-400">
                                    <i class="fas fa-shield-halved text-sm"></i>
                                </div>
                                <span class="text-xs">Security Auditor</span>
                            </div>
                            <span class="text-[10px] px-2 py-0.5 rounded bg-slate-500/20 text-slate-400 border border-slate-500/30">STANDBY</span>
                        </div>
                    </div>
                </div>

                <!-- Checkpoints / Controls -->
                <div class="glass p-5">
                    <h3 class="text-sm font-semibold mb-4 text-slate-300">Template Context</h3>
                    <div class="space-y-3">
                        <div class="p-3 rounded-xl bg-white/5 border border-white/5">
                            <div class="text-[10px] text-slate-500 uppercase mb-1">Environment</div>
                            <div class="text-xs text-indigo-300">Production Ready (Cloud Native)</div>
                        </div>
                        <div class="p-3 rounded-xl bg-white/5 border border-white/5">
                            <div class="text-[10px] text-slate-500 uppercase mb-1">Architecture</div>
                            <div class="text-xs text-indigo-300">Atomic Design System</div>
                        </div>
                        <div class="flex gap-2 mt-4">
                            <button id="retry-btn" class="flex-1 py-2 rounded-lg bg-white/5 border border-white/10 text-xs hover:bg-white/10 transition-all opacity-50 cursor-not-allowed">
                                <i class="fas fa-undo mr-1"></i> Retry
                            </button>
                            <button id="reset-btn" class="flex-1 py-2 rounded-lg bg-red-500/10 border border-red-500/20 text-red-400 text-xs hover:bg-red-500/20 transition-all">
                                <i class="fas fa-power-off mr-1"></i> Reset
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Final Output Preview (Hidden initially) -->
                <div id="final-structure" class="glass p-5 scale-95 opacity-0 transition-all duration-500 pointer-events-none">
                    <h3 class="text-sm font-semibold mb-4 text-emerald-400"><i class="fas fa-folder-tree mr-2"></i>Project Assets</h3>
                    <div class="font-mono text-[10px] space-y-1 text-slate-400">
                        <div class="text-indigo-300">ðŸ“‚ src/</div>
                        <div class="pl-4">ðŸ“‚ components/</div>
                        <div class="pl-4">ðŸ“‚ hooks/</div>
                        <div class="pl-4">ðŸ“„ App.tsx</div>
                        <div class="text-indigo-300">ðŸ“‚ public/</div>
                        <div class="text-slate-500">ðŸ“„ package.json</div>
                        <div class="text-slate-500">ðŸ“„ tsconfig.json</div>
                        <div class="text-slate-500">ðŸ“„ tailwind.config.js</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const PHASES = [
            {
                id: 'intelligence',
                title: 'Intelligence Gathering',
                icon: 'fa-brain',
                steps: [
                    'Analyzing stack: React + Tailwind + TS',
                    'Fetching latest stable versions',
                    'Resolving dependency conflicts',
                    'Checking known vulnerability database'
                ]
            },
            {
                id: 'scaffold',
                title: 'Core Scaffolding',
                icon: 'fa-cubes',
                steps: [
                    'Creating optimized directory structure',
                    'Generating boilerplate configuration',
                    'Injecting enterprise-grade linting rules',
                    'Verifying disk write permissions'
                ]
            },
            {
                id: 'install',
                title: 'Dependency Synthesis',
                icon: 'fa-download',
                steps: [
                    'Initiating package installation (npm)',
                    'Downloading critical peer dependencies',
                    'Scanning for installation console errors',
                    'Finalizing node_modules lockfile'
                ]
            },
            {
                id: 'bootstrap',
                title: 'System Bootstrapping',
                icon: 'fa-rocket',
                steps: [
                    'Starting development hot-reload server',
                    'Monitoring runtime console output',
                    'Calculating initial bundle metrics',
                    'Verifying browser viewport response'
                ]
            },
            {
                id: 'visual',
                title: 'Visual QA & Alignment',
                icon: 'fa-wand-magic-sparkles',
                steps: [
                    'Validating component render tree',
                    'Checking CSS layout constraints',
                    'Identifying visual regressions',
                    'Final verification of UI consistency'
                ]
            }
        ];

        let currentPhaseIdx = -1;
        let currentStepIdx = -1;
        let isProcessing = false;

        const startBtn = document.getElementById('start-btn');
        const retryBtn = document.getElementById('retry-btn');
        const resetBtn = document.getElementById('reset-btn');
        const terminal = document.getElementById('log-terminal');
        const stepsContainer = document.getElementById('steps-container');
        const globalProgress = document.getElementById('global-progress-bar');
        const globalPercentage = document.getElementById('global-percentage');
        const phaseTitle = document.getElementById('current-phase-title');
        const phaseIcon = document.getElementById('phase-icon');
        const stepCounterDisplay = document.getElementById('step-counter');
        const finalStructure = document.getElementById('final-structure');

        function addLog(msg, type = 'info') {
            const div = document.createElement('div');
            div.className = type === 'error' ? 'text-red-400' : 'text-slate-400';
            div.innerHTML = `<span class="text-slate-600 mr-2">[${new Date().toLocaleTimeString()}]</span> > ${msg}`;
            terminal.appendChild(div);
            terminal.scrollTop = terminal.scrollHeight;
        }

        function updateGlobalProgress() {
            const totalSteps = PHASES.length * PHASES[0].steps.length;
            const currentTotal = (currentPhaseIdx * PHASES[0].steps.length) + (currentStepIdx + 1);
            const percent = Math.min(100, Math.round((currentTotal / totalSteps) * 100));
            globalProgress.style.width = `${percent}%`;
            globalPercentage.innerText = `${percent}%`;
        }

        async function processStep() {
            if (!isProcessing) return;

            const phase = PHASES[currentPhaseIdx];
            const step = phase.steps[currentStepIdx];
            
            // Create UI for step
            const stepEl = document.createElement('div');
            stepEl.className = 'glass-card p-4 rounded-xl flex items-center justify-between border-l-2 border-l-transparent animate-in slide-in-from-right-4 fade-in duration-300';
            stepEl.innerHTML = `
                <div class="flex items-center gap-4">
                    <div class="step-indicator w-5 h-5 rounded-full border border-white/20 flex items-center justify-center">
                        <i class="fas fa-circle-notch text-[10px] text-white/20"></i>
                    </div>
                    <span class="text-sm font-medium text-slate-300">${step}</span>
                </div>
                <div class="status-badge text-[10px] font-bold text-indigo-400 tracking-widest uppercase flex items-center gap-2">
                    <span class="pulse-soft">Processing</span>
                </div>
            `;
            
            stepsContainer.appendChild(stepEl);
            stepEl.scrollIntoView({ behavior: 'smooth', block: 'end' });
            
            addLog(`Executing: ${step}...`);

            // Simulate AI working
            await new Promise(r => setTimeout(r, 800 + Math.random() * 1200));

            // Mark as completed
            stepEl.querySelector('.step-indicator').innerHTML = '<i class="fas fa-check text-[10px] text-emerald-400"></i>';
            stepEl.querySelector('.step-indicator').classList.add('border-emerald-500/50', 'bg-emerald-500/10');
            stepEl.classList.add('border-l-emerald-500');
            stepEl.querySelector('.status-badge').innerHTML = '<span class="text-emerald-400">Verified</span>';
            stepEl.querySelector('.status-badge').classList.remove('pulse-soft');

            // Move to next step or phase
            currentStepIdx++;
            updateGlobalProgress();

            if (currentStepIdx >= phase.steps.length) {
                if (currentPhaseIdx < PHASES.length - 1) {
                    addLog(`Phase ${phase.title} completed successfully.`);
                    currentPhaseIdx++;
                    currentStepIdx = 0;
                    renderPhaseHeader();
                    setTimeout(processStep, 1000);
                } else {
                    finishJob();
                }
            } else {
                setTimeout(processStep, 600);
            }
        }

        function renderPhaseHeader() {
            const phase = PHASES[currentPhaseIdx];
            phaseTitle.innerText = phase.title;
            phaseIcon.className = `fas ${phase.icon} mr-3 text-indigo-400 rotate-slow`;
            stepCounterDisplay.innerText = `${currentPhaseIdx + 1} / ${PHASES.length} PHASES`;
            
            // Visual break in logs
            addLog(`--- STARTING PHASE: ${phase.title.toUpperCase()} ---`);
        }

        function finishJob() {
            isProcessing = false;
            addLog("ALL PHASES COMPLETED. TEMPLATE READY.", "info");
            phaseIcon.classList.remove('rotate-slow');
            phaseIcon.className = "fas fa-circle-check mr-3 text-emerald-400";
            phaseTitle.innerText = "Project Architected Successfully";
            
            finalStructure.classList.remove('opacity-0', 'scale-95', 'pointer-events-none');
            finalStructure.classList.add('opacity-100', 'scale-100');
            
            startBtn.innerHTML = '<i class="fas fa-rocket mr-2"></i> Launch Editor';
            startBtn.classList.replace('bg-indigo-600', 'bg-emerald-600');
            startBtn.classList.replace('hover:bg-indigo-500', 'hover:bg-emerald-500');

            retryBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            retryBtn.classList.add('opacity-100', 'cursor-pointer');
        }

        startBtn.addEventListener('click', () => {
            if (isProcessing) return;
            if (currentPhaseIdx >= PHASES.length - 1) {
                addLog("Launching production instance...");
                return;
            }

            isProcessing = true;
            startBtn.disabled = true;
            startBtn.classList.add('opacity-50', 'cursor-not-allowed');
            startBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Generating...';
            
            stepsContainer.innerHTML = '';
            currentPhaseIdx = 0;
            currentStepIdx = 0;
            renderPhaseHeader();
            processStep();
        });

        resetBtn.addEventListener('click', () => {
            location.reload();
        });

        retryBtn.addEventListener('click', () => {
            if (isProcessing) return;
            // Simply restarts last phase in this mock
            addLog("Retrying last checkpoint synthesis...", "info");
            currentStepIdx = 0;
            stepsContainer.innerHTML = '';
            isProcessing = true;
            processStep();
        });

    </script>
</body>
</html>